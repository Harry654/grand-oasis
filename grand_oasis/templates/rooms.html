{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Grand Oasis - Hotel HTML Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="" name="keywords" />
    <meta content="" name="description" />

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon" />

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Icon Font Stylesheet -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- Libraries Stylesheet -->
    <link href="{% static 'lib/animate/animate.min.css' %}" rel="stylesheet" />
    <link
      href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}"
      rel="stylesheet"
    />
    <link
      href="{% static 'lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css' %}"
      rel="stylesheet"
    />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" />

    <!-- Template Stylesheet -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet" />
  </head>

  <body>
    <div class="container-xxl bg-white p-0">
      <!-- Header Start -->
      <div class="container-fluid bg-dark px-0">
        <div class="row gx-0">
          <div class="col-lg-3 bg-dark d-none d-lg-block">
            <a
              href="index.html"
              class="navbar-brand w-100 h-100 m-0 p-0 d-flex align-items-center justify-content-center"
            >
              <h1 class="m-0 text-primary text-uppercase">Grand Oasis</h1>
            </a>
          </div>
          <div class="col-lg-5 bg-primary ms-auto">
            <nav class="navbar navbar-expand-lg bg-dark navbar-dark p-3 p-lg-0">
              <a href="/" class="navbar-brand d-block d-lg-none">
                <h1 class="m-0 text-primary text-uppercase">Grand Oasis</h1>
              </a>
              <button
                type="button"
                class="navbar-toggler"
                data-bs-toggle="collapse"
                data-bs-target="#navbarCollapse"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
              <div
                class="collapse navbar-collapse justify-content-between"
                id="navbarCollapse"
              >
                <div class="navbar-nav mr-auto py-0">
                  <a href="/" class="nav-item nav-link">Home</a>
                  <a href="about.html" class="nav-item nav-link">About</a>
                  <a href="service.html" class="nav-item nav-link">Services</a>
                  <a href="/rooms" class="nav-item nav-link active">Rooms</a>
                  <div class="nav-item dropdown">
                    <a
                      href="#"
                      class="nav-link dropdown-toggle"
                      data-bs-toggle="dropdown"
                      >Pages</a
                    >
                    <div class="dropdown-menu rounded-0 m-0">
                      <a href="booking.html" class="dropdown-item">Booking</a>
                      <a href="team.html" class="dropdown-item">Our Team</a>
                      <a href="testimonial.html" class="dropdown-item"
                        >Testimonial</a
                      >
                    </div>
                  </div>
                  <a href="/contact" class="nav-item nav-link">Contact</a>
                </div>
                <!-- <a
                  href="https://htmlcodex.com/hotel-html-template-pro"
                  class="btn btn-primary rounded-0 py-4 px-md-5 d-none d-lg-block"
                  >Premium Version<i class="fa fa-arrow-right ms-3"></i
                ></a> -->
              </div>
            </nav>
          </div>
        </div>
      </div>
      <!-- Header End -->

      <!-- Page Header Start -->
      <div
        class="container-fluid page-header mb-5 p-0"
        style="background-image: url('/static/img/carousel-1.jpg')"
      >
        <div class="container-fluid page-header-inner py-5">
          <div class="container text-center pb-5">
            <h1 class="display-3 text-white mb-3 animated slideInDown">
              Explore Our <span class="text-primary text-uppercase">Rooms</span>
            </h1>
            
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb justify-content-center text-uppercase">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Pages</a></li>
                <li
                  class="breadcrumb-item text-white active"
                  aria-current="page"
                >
                  Rooms
                </li>
              </ol>
            </nav>
          </div>
        </div>
      </div>
      <!-- Page Header End -->

      <!-- Floor Start -->
      <div class="container-xxl py-5">
        <div class="container">
          

          <div class="accordion" id="accordionExample{{ forloop.counter }}">
          {% for floor in floors %}
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ forloop.counter }}" aria-controls="collapseOne{{ forloop.counter }}">
                  <h5>Floor {{ forloop.counter }}</h5>
                </button>
              </h2>
              <div id="collapse{{ forloop.counter }}" class="accordion-collapse collapse show" data-bs-parent="#accordionExample{{ forloop.counter }}">
                <div class="accordion-body">
                
            <!-- Room Start -->
            <div class="row g-4 mb-5">
              {% for room in floor %}
                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
                <div class="room-item shadow rounded overflow-hidden">
                  <div class="position-relative">
                      {% if room.category == 'Junior Suite' %} 
                        <img
                        class="img-fluid"
                        src="{% static 'img/room-1.jpg' %}"
                        alt=""
                        />
                      {% endif %}

                      {% if room.category == 'Executive Suite' %} 
                        <img
                        class="img-fluid"
                        src="{% static 'img/room-2.jpg' %}"
                        alt=""
                        />
                      {% endif %}

                      {% if room.category == 'Super Deluxe' %} 
                        <img
                        class="img-fluid"
                        src="{% static 'img/room-3.jpg' %}"
                        alt=""
                        />
                      {% endif %}
                    <small
                      class="position-absolute start-0 top-100 translate-middle-y bg-primary text-white rounded py-1 px-3 ms-4"
                      >${{ room.price_per_night }}/Night</small
                    >
                    <small
                      class="position-absolute end-0 top-100 translate-middle-y bg-success text-white rounded py-1 px-3 me-4"
                      >{{ room.room_number }}</small
                    >
                  </div>
                  <div class="p-4 mt-2">
                    <div class="d-flex justify-content-between mb-3">
                      <h5 class="mb-0">{{ room.category }}</h5>
                      <div class="ps-2">
                        <small class="fa fa-star text-primary"></small>
                        <small class="fa fa-star text-primary"></small>
                        <small class="fa fa-star text-primary"></small>
                        <small class="fa fa-star text-primary"></small>
                        <small class="fa fa-star text-primary"></small>
                      </div>
                    </div>
                    <div class="d-flex mb-3">
                      <small class="border-end me-3 pe-3"
                        ><i class="fa fa-bed text-primary me-2"></i>3 Bed</small
                      >
                      <small class="border-end me-3 pe-3"
                        ><i class="fa fa-bath text-primary me-2"></i>2 Bath</small
                      >
                      <small
                        ><i class="fa fa-wifi text-primary me-2"></i>Wifi</small
                      >
                    </div>
                    <p class="text-body mb-3">
                      {{ room.description }}
                    </p>
                    <div class="d-flex justify-content-between">
                      <!-- {% if room.category == 'Junior Suite' %} 
                      {% endif %} -->
                      <a class="btn btn-sm btn-primary rounded py-2 px-4" 
                        href=""
                        data-bs-toggle="modal"
                        data-bs-target="#detailModal{{ room.id }}"
                        >View Detail</a
                      >
                      {% if user.is_authenticated %} 
                      <button
                        id="book_now_btn"
                        class="btn btn-sm btn-dark rounded py-2 px-4"
                        onclick="setRoom()"
                        room_id="{{room.id}}"
                        price_per_night="{{room.price_per_night}}"
                        data-bs-toggle="modal"
                        data-bs-target="#bookRoomModal{{ room.id }}"
                        {% if not room.is_available %} disabled {% endif %}
                      >
                        
                        {% if room.is_available %} Book Now {% endif %}
                        {% if not room.is_available %} unavailable {% endif %}
                    </button>
                      {% else %}
                      <a
                        class="btn btn-sm btn-dark rounded py-2 px-4"
                        href="/login"
                        {% if not room.is_available %} disabled {% endif %}
                      >
                        
                        {% if room.is_available %} Book Now {% endif %}
                        {% if not room.is_available %} unavailable {% endif %}
                    </a>
                      {% endif %}
                      

                    </div>
                  </div>
                </div>
              

              <!-- Booking modal start -->
              <div
              class="modal fade w-100"
              id="bookRoomModal{{ room.id }}"
              tabindex="-1"
              aria-labelledby="bookRoomModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="bookRoomModalLabel">Book Room</h1>
                    <button
                    type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    ></button>
                  </div>
                  
                  <form id="myForm{{ room.id }}" action="" method="POST">
                    {% csrf_token %}
                  <div class="modal-body">
                    <p id="room_number">Room Number: {{ room.room_number }}</p>
                    <p id="room_type">Room Type: {{ room.category }}</p>
                    
                      <select name="user" required hidden>
                        {% for userOption in users %}
                          <option 
                            value="{{ userOption.id }}" 
                            {% if userOption.id == user.id %} selected {% endif %}
                          ></option>
                        {% endfor %}
                      </select>

                      <select name="room" required hidden>
                        {% for roomOption in rooms %}
                          <option 
                            value="{{ roomOption.id }}" 
                            {% if roomOption.id == room.id %} selected {% endif %}
                          ></option>
                        {% endfor %}
                      </select>
                      
                      <label for="checkin">Check In: 
                        <input name="checkin" id="checkin" class="checkin" type="date" required />
                      </label><br />
        
                      <label for="checkout">Check Out: 
                        <input name="checkout" id="checkout" class="checkout" type="date" required />
                      </label>
        
                      <p id="duration{{ room.id }}" class="duration">Duration: 0 days</p>
                      <p id="amount{{ room.id }}" class="amount">Amount: $0</p>
                      
                      <!-- <h1 class="modal-title fs-5" id="juniorSuiteModalLabel">Additional Services</h1>
                      

                        {% for service in extra_services %}
                          <div class="extra-service-item">
                            <span>{{ service.type }}</span>
                            <span>{{ service.price }}</span>
                            <button class="btn btn-danger btn-sm delete-service" data-service-id="{{ service.id }}">Delete</button>
                          </div>
                        {% endfor %}

                      <button class="btn btn-primary btn-sm" id="add-service">Add Service</button> -->

                    <!-- {{form.as_div}} -->
                  </div>
                  
                  
                  
                  <div class="modal-footer">
                    <button class="btn btn-primary">Book Room</button>
                  </div>
                </form>

                </div>
              </div>
              </div>
              <!-- Booking modal end -->

              <!-- Detail modal start -->
                <div
                class="modal fade w-100"
                id="detailModal{{ room.id }}"
                tabindex="-1"
                aria-labelledby="detailModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="detailModalLabel">
                        {% if room.category == 'Junior Suite' %} Junior Suite {% endif %}
                        {% if room.category == 'Executive Suite' %} Executive Suite {% endif %}
                        {% if room.category == 'Super Deluxe' %} Super Deluxe {% endif %}
                      </h1>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>

                    <div class="modal-body">
                      {% if room.category == 'Junior Suite' %}
                      <img
                        id="detailsImg"
                        class="img-fluid"
                        src="{% static 'img/room-1.jpg' %}"
                        alt=""
                      />
                    <p id="detailsDesc">Step into our comfortable and affordable basic hotel room, designed with your convenience in mind. Unwind in a cozy and inviting atmosphere, complete with a well-appointed en-suite bathroom and a snug bed that guarantees a restful night's sleep. Stay productive with a dedicated workspace, ideal for catching up on work or planning your itinerary. Whether you're a budget-conscious traveler or simply seeking simplicity, our basic hotel room provides all the essentials for a pleasant stay without compromising on comfort.</p>
                    <p><strong id="detailsPrice">$120 / Night</strong></p>
                    {% endif %}
                    
                    {% if room.category == 'Executive Suite' %}
                    <img
                    id="detailsImg"
                    class="img-fluid"
                    src="{% static 'img/room-2.jpg' %}"
                    alt=""
                    />
                    <p id="detailsDesc">Indulge in a delightful experience in our standard hotel room, where modern elegance and comfort seamlessly come together. Immerse yourself in the tastefully designed space, featuring stylish décor and thoughtful amenities. Drift into tranquility on the comfortable bed, and refresh in the well-appointed bathroom that offers both functionality and style. Whether you're traveling for business or leisure, our standard room provides the perfect retreat to relax and recharge after a day of exploring. Embrace the balance of comfort, convenience, and affordability in our inviting standard hotel room.</p>
                    <p><strong id="detailsPrice">$300 / Night</strong></p>
                    {% endif %}
                    
                    {% if room.category == 'Super Deluxe' %}
                    <img
                    id="detailsImg"
                    class="img-fluid"
                    src="{% static 'img/room-3.jpg' %}"
                    alt=""
                    />
                    <p id="detailsDesc">Experience the epitome of luxury and sophistication in our executive hotel room. From the moment you step inside, you'll be enveloped in an ambiance of elegance and refinement. Indulge in the spaciousness of the room, carefully adorned with upscale furnishings and captivating décor. Sink into the plush king-size bed and revel in its comfort. The upgraded bathroom offers a touch of opulence, featuring premium fixtures and luxurious amenities. As an executive guest, you'll enjoy exclusive access to our executive lounge, where personalized services and complimentary perks await. Whether you're traveling for business or seeking a luxurious retreat, our executive room exceeds expectations, offering an extraordinary stay tailored to the discerning traveler.</p>
                    <p><strong id="detailsPrice">$500 / Night</strong></p>
                    
                      {% endif %}
                      
                      {% if not room.is_available %}
                        {% for reservation in reservations %}
                          {% if reservation.room.id == room.id %}
                            <p class="bg-primary text-white p-2 rounded-0">
                              <i>This room is unavailable from <strong>{{ reservation.checkin }}</strong> to <strong>{{ reservation.checkout }}</strong></i>
                            </p>
                          {% endif %}
                        {% endfor %}
                      {% endif %}

                    </div>

                  </div>
                </div>
                </div>
              <!-- Detail modal end -->


                </div>
              {% endfor %}
            </div>
            <!-- Room End -->
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
        </div>
      </div>
      <!-- Floor End -->

      <!-- Message Modal Start -->
      {% if message %}
        <script>
          alert('{{ message }}');
        </script>
      {% endif %}
      
      <!-- Message Modal End -->
      
      <!-- Footer Start -->
      <div
        class="container-fluid bg-dark text-light footer wow fadeIn mt-5"
        data-wow-delay="0.1s"
      >
        <div class="container pb-5">
          <div class="row g-5">
            <div class="col-md-6 col-lg-4">
              <div class="bg-primary rounded p-4">
                <a href="index.html"
                  ><h1 class="text-white text-uppercase mb-3">
                    Grand Oasis
                  </h1></a
                >
                <p class="text-white mb-0">
                  Download
                  <a
                    class="text-dark fw-medium"
                    href="https://htmlcodex.com/hotel-html-template-pro"
                    >Grand Oasis – Premium Version</a
                  >, build a professional website for your hotel business and
                  grab the attention of new visitors upon your site’s launch.
                </p>
              </div>
            </div>
            <div class="col-md-6 col-lg-3">
              <h6
                class="section-title text-start text-primary text-uppercase mb-4"
              >
                Contact
              </h6>
              <p class="mb-2">
                <i class="fa fa-map-marker-alt me-3"></i>123 Street, New York,
                USA
              </p>
              <p class="mb-2">
                <i class="fa fa-phone-alt me-3"></i>+012 345 67890
              </p>
              <p class="mb-2">
                <i class="fa fa-envelope me-3"></i>info@example.com
              </p>
              <div class="d-flex pt-2">
                <a class="btn btn-outline-light btn-social" href=""
                  ><i class="fab fa-twitter"></i
                ></a>
                <a class="btn btn-outline-light btn-social" href=""
                  ><i class="fab fa-facebook-f"></i
                ></a>
                <a class="btn btn-outline-light btn-social" href=""
                  ><i class="fab fa-youtube"></i
                ></a>
                <a class="btn btn-outline-light btn-social" href=""
                  ><i class="fab fa-linkedin-in"></i
                ></a>
              </div>
            </div>
            <div class="col-lg-5 col-md-12">
              <div class="row gy-5 g-4">
                <div class="col-md-6">
                  <h6
                    class="section-title text-start text-primary text-uppercase mb-4"
                  >
                    Company
                  </h6>
                  <a class="btn btn-link" href="">About Us</a>
                  <a class="btn btn-link" href="">Contact Us</a>
                  <a class="btn btn-link" href="">Privacy Policy</a>
                  <a class="btn btn-link" href="">Terms & Condition</a>
                  <a class="btn btn-link" href="">Support</a>
                </div>
                <div class="col-md-6">
                  <h6
                    class="section-title text-start text-primary text-uppercase mb-4"
                  >
                    Services
                  </h6>
                  <a class="btn btn-link" href="">Food & Restaurant</a>
                  <a class="btn btn-link" href="">Spa & Fitness</a>
                  <a class="btn btn-link" href="">Sports & Gaming</a>
                  <a class="btn btn-link" href="">Event & Party</a>
                  <a class="btn btn-link" href="">GYM & Yoga</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="container">
          <div class="copyright">
            <div class="row">
              <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                &copy; <a class="border-bottom" href="#">Your Site Name</a>, All
                Right Reserved.

                <!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
                Designed By
                <a class="border-bottom" href="https://htmlcodex.com"
                  >HTML Codex</a
                >
              </div>
              <div class="col-md-6 text-center text-md-end">
                <div class="footer-menu">
                  <a href="">Home</a>
                  <a href="">Cookies</a>
                  <a href="">Help</a>
                  <a href="">FQAs</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Footer End -->

      <!-- Back to Top -->
      <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"
        ><i class="bi bi-arrow-up"></i
      ></a>
      
    </div>
  </body>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'lib/wow/wow.min.js' %}"></script>
    <script src="{% static 'lib/easing/easing.min.js' %}"></script>
    <script src="{% static 'lib/waypoints/waypoints.min.js' %}"></script>
    <script src="{% static 'lib/counterup/counterup.min.js' %}"></script>
    <script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>
    <script src="{% static 'lib/tempusdominus/js/moment.min.js' %}"></script>
    <script
      src="{% static 'lib/tempusdominus/js/moment-timezone.min.js' %}"
    ></script>
    <script
      src="{% static 'lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js' %}"
    ></script>

    <!-- Template Javascript -->
    <script src="{% static 'js/main.js' %}"></script>
</html>
